<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Contratos - Fotografia</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="style.css">
</head>

<body class="bg-gray-100 font-sans text-gray-800">

    <div id="login-overlay" class="fixed inset-0 bg-gray-200 z-50 flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-sm">
            <div class="flex items-center justify-center mb-6">
                <i data-lucide="camera" class="h-10 w-10 text-blue-600"></i>
                <h1 class="text-2xl font-bold ml-2 text-gray-800">Gestor Studio</h1>
            </div>
            <form id="login-form">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="email"
                        class="w-full mt-1 p-2 border rounded focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700">Senha</label>
                    <input type="password" id="password"
                        class="w-full mt-1 p-2 border rounded focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div id="login-error-message" class="hidden text-red-500 text-sm mb-4 text-center"></div>
                <button type="submit"
                    class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition">Entrar</button>
                <button type="button" id="register-button"
                    class="w-full mt-2 text-blue-600 text-sm hover:underline">Criar conta</button>
            </form>
        </div>
    </div>
    <div id="app-container" class="hidden flex h-screen overflow-hidden">

        <aside id="sidebar"
            class="w-64 bg-white shadow-lg z-20 absolute inset-y-0 left-0 transform -translate-x-full md:relative md:translate-x-0 transition-transform duration-300 ease-in-out flex flex-col flex-shrink-0">
            <div class="p-6 border-b flex items-center justify-between">
                <div class="flex items-center font-bold text-xl text-blue-600">
                    <i data-lucide="aperture" class="mr-2"></i> Studio
                </div>
                <button id="mobile-menu-button" class="md:hidden text-gray-500"><i data-lucide="x"></i></button>
            </div>

            <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
                <button onclick="window.app.showSection('section-dashboard')"
                    class="w-full flex items-center p-3 text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors">
                    <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i> Dashboard
                </button>
                <button onclick="window.app.showSection('section-kanban')"
                    class="w-full flex items-center p-3 text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors">
                    <i data-lucide="kanban" class="w-5 h-5 mr-3"></i> Kanban
                </button>
                <button onclick="window.app.showSection('section-entrega')"
                    class="w-full flex items-center p-3 text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors">
                    <i data-lucide="check-circle" class="w-5 h-5 mr-3"></i> Entregas
                </button>
                <button onclick="window.app.showSection('section-clientes')"
                    class="w-full flex items-center p-3 text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors">
                    <i data-lucide="users" class="w-5 h-5 mr-3"></i> Clientes
                </button>
                <button onclick="window.app.showSection('section-eventos')"
                    class="w-full flex items-center p-3 text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors">
                    <i data-lucide="calendar" class="w-5 h-5 mr-3"></i> Eventos
                </button>
                <button onclick="window.app.showSection('section-contratos')"
                    class="w-full flex items-center p-3 text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors">
                    <i data-lucide="file-text" class="w-5 h-5 mr-3"></i> Contratos
                </button>
                <button onclick="window.app.showSection('section-financeiro')"
                    class="w-full flex items-center p-3 text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors">
                    <i data-lucide="dollar-sign" class="w-5 h-5 mr-3"></i> Financeiro
                </button>
                <button onclick="window.app.showSection('section-relatorios')"
                    class="w-full flex items-center p-3 text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors">
                    <i data-lucide="file-bar-chart-2" class="w-5 h-5 mr-3"></i> Relatório / Balanço
                </button>
                <button onclick="window.app.showSection('section-calendario')"
                    class="w-full flex items-center p-3 text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors">
                    <i data-lucide="calendar-days" class="w-5 h-5 mr-3"></i> Calendário
                </button>
                <button onclick="window.app.showSection('section-configuracoes')"
                    class="w-full flex items-center p-3 text-gray-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors">
                    <i data-lucide="settings" class="w-5 h-5 mr-3"></i> Configurações
                </button>
            </nav>

            <div class="p-4 border-t bg-gray-50">
                <div class="text-xs text-gray-500 mb-2 truncate" id="auth-status">Verificando...</div>
                <button id="logout-button"
                    class="w-full flex items-center justify-center p-2 bg-red-100 text-red-600 rounded hover:bg-red-200 transition">
                    <i data-lucide="log-out" class="w-4 h-4 mr-2"></i> Sair
                </button>
            </div>
        </aside>
        <main class="flex-1 min-w-0 overflow-x-hidden overflow-y-auto bg-gray-100 p-4 md:p-8">
            <button id="mobile-menu-trigger" class="md:hidden mb-4 p-2 bg-white rounded shadow text-gray-600">
                <i data-lucide="menu"></i> Menu
            </button>

            <div id="section-dashboard" class="content-section">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <h1 class="text-2xl font-bold text-gray-800">Visão Geral</h1>
                    <div class="flex gap-2 bg-white p-2 rounded shadow-sm mt-2 md:mt-0">
                        <select id="dashboard-filtro-ano" class="p-2 border rounded text-sm bg-gray-50">
                            <option value="todos">Todo o Período (Geral)</option>
                        </select>
                        <select id="dashboard-filtro-mes" class="p-2 border rounded text-sm bg-gray-50">
                            <option value="todos">Todos os Meses</option>
                            <option value="0">Janeiro</option>
                            <option value="1">Fevereiro</option>
                            <option value="2">Março</option>
                            <option value="3">Abril</option>
                            <option value="4">Maio</option>
                            <option value="5">Junho</option>
                            <option value="6">Julho</option>
                            <option value="7">Agosto</option>
                            <option value="8">Setembro</option>
                            <option value="9">Outubro</option>
                            <option value="10">Novembro</option>
                            <option value="11">Dezembro</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-blue-500">
                        <p class="text-sm text-gray-500">A Receber (Restante)</p>
                        <p class="text-2xl font-bold text-gray-800" id="total-pendente">R$ 0,00</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-green-500">
                        <p class="text-sm text-gray-500">Contratos Fechados</p>
                        <p class="text-2xl font-bold text-gray-800" id="db-contratos-mes">R$ 0,00</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-red-500">
                        <p class="text-sm text-gray-500">Total Custos</p>
                        <p class="text-2xl font-bold text-gray-800" id="total-custos">R$ 0,00</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-indigo-500">
                        <p class="text-sm text-gray-500">Lucro Líquido</p>
                        <p class="text-2xl font-bold text-gray-800" id="lucro-liquido">R$ 0,00</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-gray-700">Atenção: Entregas</h3>
                            <i data-lucide="alert-circle" class="text-red-500"></i>
                        </div>
                        <p class="text-4xl font-bold text-red-600 mb-2" id="db-entregas-criticas">0</p>
                        <p class="text-sm text-gray-500">Prazos vencidos ou vencendo hoje</p>
                        <button onclick="window.app.showSection('section-entrega')"
                            class="mt-4 text-blue-600 text-sm hover:underline">Gerenciar Entregas &rarr;</button>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-sm col-span-1 lg:col-span-2">
                        <h3 class="font-bold text-gray-700 mb-4">Próximos Eventos (5)</h3>
                        <div id="dashboard-proximos-eventos" class="space-y-3">
                            <p class="text-gray-400">Carregando...</p>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-sm col-span-1 md:col-span-2 lg:col-span-3">
                        <h3 class="font-bold text-gray-700 mb-4">Status Pós-Evento (Últimos 5)</h3>
                        <div id="dashboard-ultimos-eventos" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <p class="text-gray-400">Carregando...</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="section-kanban" class="content-section hidden h-full flex flex-col">
                <div class="flex justify-between items-center mb-4">
                    <h1 class="text-2xl font-bold text-gray-800">Quadro de Eventos</h1>
                    <form id="form-nova-coluna" class="flex gap-2">
                        <input type="text" name="coluna-nome" placeholder="Nova Coluna..."
                            class="p-2 border rounded text-sm w-32 md:w-auto">
                        <button type="submit"
                            class="bg-gray-800 text-white px-3 py-2 rounded hover:bg-gray-700 text-sm">Adicionar</button>
                    </form>
                </div>
                <div id="kanban-board-container" class="flex-1 overflow-x-auto overflow-y-hidden">
                    <div id="kanban-board" class="flex gap-4 h-full pb-4 min-w-max"></div>
                </div>
            </div>
            <div id="section-entrega" class="content-section hidden">
                <h1 class="text-2xl font-bold mb-6 text-gray-800">Controle de Prazos</h1>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white p-4 rounded shadow">
                        <label class="block text-sm font-bold text-gray-700 mb-2">Filtrar por Evento</label>
                        <select id="entrega-evento-select" class="w-full p-2 border rounded">
                            <option value="">Carregando...</option>
                        </select>
                    </div>
                </div>
                <div id="entrega-default-view" class="space-y-4">
                    <h2 class="text-lg font-semibold text-gray-700">Entregas Pendentes e Atrasadas</h2>
                    <div id="entrega-atrasos-container" class="grid gap-4"></div>
                </div>
                <div id="entrega-management-area" class="hidden grid grid-cols-1 md:grid-cols-3 gap-6"></div>
            </div>
            <div id="section-clientes" class="content-section hidden">
                <h1 class="text-2xl font-bold mb-6 text-gray-800">Clientes</h1>
                <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                    <h2 class="text-lg font-semibold mb-4">Novo Cliente</h2>
                    <form id="form-cliente" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <input type="text" name="cliente-nome" placeholder="Nome Completo" class="p-2 border rounded"
                            required>
                        <input type="text" name="cliente-telefone" placeholder="Telefone/WhatsApp"
                            class="p-2 border rounded">
                        <input type="email" name="cliente-email" placeholder="Email" class="p-2 border rounded">
                        <input type="text" name="cliente-documento" placeholder="CPF/RG" class="p-2 border rounded">
                        <input type="text" name="cliente-endereco" placeholder="Endereço Completo"
                            class="p-2 border rounded col-span-1 md:col-span-2 lg:col-span-1">
                        <button type="submit"
                            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition md:col-start-2 lg:col-start-3">Cadastrar
                            Cliente</button>
                    </form>
                </div>
                <div class="bg-white rounded-lg shadow-md overflow-x-auto">
                    <table class="w-full min-w-max">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="p-4 text-left text-sm font-semibold text-gray-600">Nome</th>
                                <th class="p-4 text-left text-sm font-semibold text-gray-600">Telefone</th>
                                <th class="p-4 text-left text-sm font-semibold text-gray-600">Email</th>
                                <th class="p-4 text-left text-sm font-semibold text-gray-600">Endereço</th>
                                <th class="p-4 text-left text-sm font-semibold text-gray-600">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="lista-clientes"></tbody>
                    </table>
                </div>
            </div>
            <div id="section-eventos" class="content-section hidden">
                <h1 class="text-2xl font-bold mb-6 text-gray-800">Eventos</h1>
                <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                    <h2 class="text-lg font-semibold mb-4">Novo Evento</h2>
                    <form id="form-evento" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <select name="evento-cliente" id="evento-cliente" class="p-2 border rounded" required>
                            <option>Carregando clientes...</option>
                        </select>

                        <select name="evento-vendedor" id="evento-vendedor" class="p-2 border rounded">
                            <option value="">Selecione o Vendedor...</option>
                        </select>

                        <input type="text" name="evento-nome" id="evento-nome"
                            placeholder="Nome do Evento (ex: Casamento Maria e João)" class="p-2 border rounded"
                            required>
                        <input type="date" name="evento-data" id="evento-data" class="p-2 border rounded" required>
                        <input type="text" name="evento-local" placeholder="Local do Evento" class="p-2 border rounded">
                        <select name="evento-tipo" id="evento-tipo" class="p-2 border rounded">
                            <option value="">Categoria...</option>
                        </select>
                        <select name="evento-subcategoria" id="evento-subcategoria" class="p-2 border rounded" disabled>
                            <option value="">Subcategoria...</option>
                        </select>
                        <textarea name="evento-descricao" placeholder="Observações..."
                            class="p-2 border rounded md:col-span-2"></textarea>
                        <button type="submit"
                            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition md:col-span-2">Agendar
                            Evento</button>
                    </form>
                </div>

                <!-- Lista de Eventos Agendados (Table View) -->
                <div class="bg-white rounded-lg shadow-md overflow-x-auto">
                    <h2 class="text-lg font-semibold p-6 pb-2">Eventos Agendados</h2>
                    <table class="w-full min-w-max">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="p-4 text-left text-sm font-semibold text-gray-600">Data</th>
                                <th class="p-4 text-left text-sm font-semibold text-gray-600">Nome do Evento</th>
                                <th class="p-4 text-left text-sm font-semibold text-gray-600">Categoria / Sub</th>
                                <th class="p-4 text-left text-sm font-semibold text-gray-600">Cliente</th>
                                <th class="p-4 text-left text-sm font-semibold text-gray-600">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="lista-eventos"></tbody>
                    </table>
                </div>
            </div>
            <div id="section-contratos" class="content-section hidden">
                <h1 class="text-2xl font-bold mb-6 text-gray-800">Contratos</h1>
                <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                    <h2 class="text-lg font-semibold mb-4">Novo Contrato</h2>
                    <form id="form-contrato" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <select name="contrato-cliente" id="contrato-cliente" class="p-2 border rounded" required>
                            <option>Cliente...</option>
                        </select>
                        <select name="contrato-evento" id="contrato-evento" class="p-2 border rounded" required>
                            <option>Evento...</option>
                        </select>
                        <input type="text" id="contrato-subcategoria" placeholder="Subcategoria (Auto)"
                            class="p-2 border rounded bg-gray-100" disabled>
                        <input type="number" name="contrato-valor-total" id="contrato-valor-total"
                            placeholder="Valor Total (R$)" step="0.01" class="p-2 border rounded" required>
                        <input type="date" name="contrato-data" id="contrato-data" class="p-2 border rounded">
                        <select name="contrato-status" id="contrato-status" class="p-2 border rounded">
                            <option value="Proposta">Proposta</option>
                            <option value="Enviado">Enviado</option>
                            <option value="Assinado">Assinado</option>
                            <option value="Concluído">Concluído</option>
                            <option value="Cancelado">Cancelado</option>
                        </select>
                        <input type="text" name="contrato-link" id="contrato-link"
                            placeholder="Link do Documento (Drive/PDF)" class="p-2 border rounded">
                        <input type="text" name="contrato-forma-pagamento" id="contrato-forma-pagamento"
                            placeholder="Condições (ex: 3x Pix)" class="p-2 border rounded md:col-span-3">

                        <!-- ... (skipping to edit modal) ... -->

                        <button type="submit"
                            class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition md:col-span-3">Registrar
                            Contrato</button>
                    </form>
                </div>
                <div class="bg-white rounded-lg shadow-md overflow-x-auto">
                    <div class="p-4 border-b bg-gray-50 flex items-center">
                        <i data-lucide="search" class="w-5 h-5 text-gray-400 mr-2"></i>
                        <input type="text" id="filtro-contrato-busca"
                            placeholder="Buscar contrato por nome do cliente..."
                            class="w-full bg-transparent border-none focus:ring-0 text-sm text-gray-700 outline-none">
                    </div>
                    <table class="w-full min-w-max">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="p-4 text-left">Cliente</th>
                                <th class="p-4 text-left">Evento</th>
                                <th class="p-4 text-left">Financeiro</th>
                                <th class="p-4 text-left">Status</th>
                                <th class="p-4 text-left">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="lista-contratos"></tbody>
                    </table>
                </div>
            </div>
            <div id="section-gerador" class="content-section hidden">
                <div class="flex items-center mb-6">
                    <button onclick="window.app.showSection('section-contratos')"
                        class="mr-4 p-2 bg-gray-200 rounded-full hover:bg-gray-300">
                        <i data-lucide="arrow-left" class="w-5 h-5"></i>
                    </button>
                    <h1 class="text-2xl font-bold text-gray-800">Gerador de Documentos</h1>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg max-w-4xl mx-auto">
                    <div class="mb-6 border-b pb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Tipo de Contrato</label>
                        <select id="contractType"
                            class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 focus:ring-2 focus:ring-blue-500">
                            <option value="4">Contrato Geral</option>
                            <option value="1">Fotografia Infantil</option>
                            <option value="2">Fotografia de Casamento</option>
                            <option value="3">Casamento Civil</option>
                            <option value="6">Formatura</option>
                            <option value="5">Apenas Preenchimento de Dados</option>
                        </select>
                    </div>
                    <form id="contractForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="md:col-span-2 bg-blue-50 p-4 rounded-lg">
                            <h3 class="font-bold text-blue-800 mb-3 flex items-center"><i data-lucide="calendar"
                                    class="w-4 h-4 mr-2"></i> Dados do Evento</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div><label class="block text-gray-700 text-xs font-bold mb-1" for="eventDate">Data do
                                        Evento</label><input class="w-full p-2 border rounded" id="eventDate"
                                        type="date"></div>
                                <div><label class="block text-gray-700 text-xs font-bold mb-1"
                                        for="eventTime">Horário</label><input class="w-full p-2 border rounded"
                                        id="eventTime" type="time"></div>
                                <div><label class="block text-gray-700 text-xs font-bold mb-1"
                                        for="eventDuration">Duração (h)</label><input class="w-full p-2 border rounded"
                                        id="eventDuration" type="text" placeholder="Ex: 4 horas"></div>
                                <div class="md:col-span-3"><label class="block text-gray-700 text-xs font-bold mb-1"
                                        for="eventLocal">Local do Evento</label><input class="w-full p-2 border rounded"
                                        id="eventLocal" type="text" placeholder="Endereço completo"></div>
                            </div>
                        </div>
                        <div class="md:col-span-2 bg-gray-50 p-4 rounded-lg">
                            <h3 class="font-bold text-gray-800 mb-3 flex items-center"><i data-lucide="user"
                                    class="w-4 h-4 mr-2"></i> Dados do Contratante</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <input class="w-full p-2 border rounded" id="clientName" type="text"
                                    placeholder="Nome Completo">
                                <input class="w-full p-2 border rounded" id="clientCPF" type="text" placeholder="CPF">
                                <input class="w-full p-2 border rounded" id="clientRG" type="text"
                                    placeholder="RG (Opcional)">
                                <input class="w-full p-2 border rounded" id="clientPhone" type="text"
                                    placeholder="Telefone">
                                <input class="w-full p-2 border rounded md:col-span-2" id="clientEmail" type="email"
                                    placeholder="Email">
                                <input class="w-full p-2 border rounded md:col-span-2" id="clientAddress" type="text"
                                    placeholder="Endereço Residencial">
                            </div>
                        </div>
                        <div id="studentDetails" class="hidden md:col-span-2 bg-purple-50 p-4 rounded-lg">
                            <h3 class="font-bold text-purple-800 mb-3">Dados do Formando</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <input class="w-full p-2 border rounded" id="studentName" type="text"
                                    placeholder="Nome do Formando">
                                <input class="w-full p-2 border rounded" id="studentClass" type="text"
                                    placeholder="Turma/Curso">
                            </div>
                        </div>
                        <div id="packageSection" class="md:col-span-2 border p-4 rounded-lg border-gray-200">
                            <label class="block text-gray-700 text-xs font-bold mb-2">Selecione o Pacote</label>
                            <select id="contractPackage" class="w-full p-2 border rounded bg-white mb-4">
                                <option value="">Selecione um pacote...</option>
                            </select>
                            <div class="grid grid-cols-2 gap-4">
                                <div><label class="block text-gray-700 text-xs font-bold mb-1">Valor Total
                                        (R$)</label><input class="w-full p-2 border rounded font-bold text-green-700"
                                        id="value" type="number" step="0.01"></div>
                                <div><label class="block text-gray-700 text-xs font-bold mb-1">Forma de
                                        Pagamento</label><input class="w-full p-2 border rounded" id="paymentMethod"
                                        type="text" placeholder="Ex: 30% entrada..."></div>
                            </div>
                        </div>
                        <div class="md:col-span-2 mt-4">
                            <div class="flex items-center mb-4">
                                <input type="checkbox" id="imageRights" class="w-4 h-4 text-blue-600 rounded" checked>
                                <label for="imageRights" class="ml-2 text-sm text-gray-700">Incluir cláusula de uso de
                                    imagem</label>
                            </div>
                            <button type="button" id="generateBtn"
                                class="w-full bg-blue-700 hover:bg-blue-800 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition transform hover:scale-105 flex justify-center items-center">
                                <i data-lucide="file-check" class="w-5 h-5 mr-2"></i> Gerar Contrato (PDF & Word)
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <div id="section-financeiro" class="content-section hidden">
                <h1 class="text-2xl font-bold mb-6 text-gray-800">Financeiro</h1>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h2 class="text-lg font-semibold mb-4 text-gray-700 border-b pb-2">Contas a Receber (Pendentes)
                        </h2>
                        <div class="overflow-y-auto max-h-64">
                            <table class="w-full text-sm">
                                <thead class="text-left text-gray-500 bg-gray-50 sticky top-0">
                                    <tr>
                                        <th>Cliente</th>
                                        <th>Evento</th>
                                        <th>Falta</th>
                                        <th>Ação</th>
                                    </tr>
                                </thead>
                                <tbody id="lista-contas-a-receber"></tbody>
                            </table>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h2 class="text-lg font-semibold mb-4 text-gray-700 border-b pb-2">Fluxo de Caixa (Últimos 12
                            Meses)</h2>
                        <div class="relative h-64"><canvas id="fluxo-caixa-chart"></canvas></div>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h2 class="text-lg font-semibold mb-4">Registrar Pagamento (Entrada)</h2>
                        <button onclick="window.app.openAddPaymentModal()"
                            class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">+ Novo
                            Pagamento</button>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h2 class="text-lg font-semibold mb-4">Registrar Custo (Saída)</h2>
                        <form id="form-custo" class="space-y-3">
                            <select name="custo-evento" id="custo-evento" class="w-full p-2 border rounded text-sm">
                                <option>Carregando...</option>
                            </select>
                            <select name="custo-fotografo" id="custo-fotografo"
                                class="w-full p-2 border rounded text-sm">
                                <option>Fotógrafo...</option>
                            </select>
                            <input type="text" name="custo-descricao" placeholder="Descrição (ex: Aluguel, Internet)"
                                class="w-full p-2 border rounded text-sm" required>
                            <div class="flex gap-2">
                                <input type="number" name="custo-valor" placeholder="Valor" step="0.01"
                                    class="w-full p-2 border rounded text-sm" required>
                                <input type="date" name="custo-data" id="custo-data"
                                    class="w-full p-2 border rounded text-sm" required>
                            </div>
                            <div class="flex items-center bg-gray-50 p-2 rounded border">
                                <input type="checkbox" id="custo-repetir" name="custo-repetir"
                                    class="w-4 h-4 text-blue-600 rounded">
                                <label for="custo-repetir" class="ml-2 text-sm text-gray-700 font-medium">Custo Fixo
                                    (Repetir todo mês)</label>
                            </div>
                            <button type="submit"
                                class="w-full bg-red-500 text-white py-2 rounded hover:bg-red-600 text-sm">Salvar
                                Saída</button>
                        </form>
                    </div>
                </div>
                <div class="mt-8 bg-white rounded-lg shadow-md overflow-x-auto">
                    <div class="p-4 border-b flex flex-col md:flex-row md:items-center justify-between gap-4">
                        <h2 class="text-lg font-semibold">Histórico de Entradas</h2>
                        <div class="flex flex-col md:flex-row gap-2">
                            <input type="text" id="filtro-financeiro-busca" placeholder="Buscar Cliente..."
                                class="p-2 border rounded text-sm w-full md:w-40">
                            <select id="filtro-financeiro-mes" class="p-2 border rounded text-sm">
                                <option value="">Mês (Todos)</option>
                                <option value="0">Janeiro</option>
                                <option value="1">Fevereiro</option>
                                <option value="2">Março</option>
                                <option value="3">Abril</option>
                                <option value="4">Maio</option>
                                <option value="5">Junho</option>
                                <option value="6">Julho</option>
                                <option value="7">Agosto</option>
                                <option value="8">Setembro</option>
                                <option value="9">Outubro</option>
                                <option value="10">Novembro</option>
                                <option value="11">Dezembro</option>
                            </select>
                            <select id="filtro-financeiro-ano" class="p-2 border rounded text-sm">
                                <option value="">Ano (Todos)</option>
                                <option value="2024">2024</option>
                                <option value="2025">2025</option>
                                <option value="2026">2026</option>
                            </select>
                            <select id="filtro-financeiro-tipo" class="p-2 border rounded text-sm">
                                <option value="todos">Tipo (Todos)</option>
                                <option value="pacotes">Pacotes</option>
                                <option value="extras">Extras</option>
                            </select>
                        </div>
                    </div>
                    <table class="w-full min-w-max">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="p-4 text-left">Data</th>
                                <th class="p-4 text-left">Cliente</th>
                                <th class="p-4 text-left">Evento</th>
                                <th class="p-4 text-left">Método</th>
                                <th class="p-4 text-left">Valor</th>
                                <th class="p-4 text-left">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="lista-financeiro"></tbody>
                    </table>
                </div>
                <div class="mt-8 bg-white rounded-lg shadow-md overflow-x-auto">
                    <div class="p-4 border-b flex flex-col md:flex-row md:items-center justify-between gap-4">
                        <h2 class="text-lg font-semibold">Histórico de Saídas (Custos)</h2>
                        <div class="flex flex-col md:flex-row gap-2">
                            <input type="text" id="filtro-custos-busca" placeholder="Buscar Descrição..."
                                class="p-2 border rounded text-sm w-full md:w-40">
                            <select id="filtro-custos-mes" class="p-2 border rounded text-sm">
                                <option value="">Mês (Todos)</option>
                                <option value="0">Janeiro</option>
                                <option value="1">Fevereiro</option>
                                <option value="2">Março</option>
                                <option value="3">Abril</option>
                                <option value="4">Maio</option>
                                <option value="5">Junho</option>
                                <option value="6">Julho</option>
                                <option value="7">Agosto</option>
                                <option value="8">Setembro</option>
                                <option value="9">Outubro</option>
                                <option value="10">Novembro</option>
                                <option value="11">Dezembro</option>
                            </select>
                            <select id="filtro-custos-ano" class="p-2 border rounded text-sm">
                                <option value="">Ano (Todos)</option>
                                <option value="2024">2024</option>
                                <option value="2025">2025</option>
                                <option value="2026">2026</option>
                            </select>
                        </div>
                    </div>
                    <table class="w-full min-w-max">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="p-4 text-left">Data</th>
                                <th class="p-4 text-left">Descrição</th>
                                <th class="p-4 text-left">Evento</th>
                                <th class="p-4 text-left">Valor</th>
                                <th class="p-4 text-left">Status/Recorrência</th>
                                <th class="p-4 text-left">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="lista-custos"></tbody>
                    </table>
                </div>
            </div>
            <div id="section-relatorios" class="content-section hidden">
                <h1 class="text-2xl font-bold mb-6 text-gray-800">Balanço Financeiro Detalhado</h1>

                <div class="bg-white p-4 rounded-lg shadow-md mb-6 flex flex-col md:flex-row gap-4 items-end">
                    <div class="flex-1 w-full">
                        <label class="block text-sm font-bold text-gray-700 mb-1">Ano de Referência</label>
                        <select id="relatorio-ano" class="w-full p-2 border rounded bg-gray-50">
                        </select>
                    </div>
                    <div class="flex-1 w-full">
                        <label class="block text-sm font-bold text-gray-700 mb-1">Mês de Referência</label>
                        <select id="relatorio-mes" class="w-full p-2 border rounded bg-gray-50">
                            <option value="0">Janeiro</option>
                            <option value="1">Fevereiro</option>
                            <option value="2">Março</option>
                            <option value="3">Abril</option>
                            <option value="4">Maio</option>
                            <option value="5">Junho</option>
                            <option value="6">Julho</option>
                            <option value="7">Agosto</option>
                            <option value="8">Setembro</option>
                            <option value="9">Outubro</option>
                            <option value="10">Novembro</option>
                            <option value="11">Dezembro</option>
                        </select>
                    </div>

                    <div class="flex-1 w-full">
                        <label class="block text-sm font-bold text-gray-700 mb-1">Filtrar por Categoria</label>
                        <select id="relatorio-categoria" class="w-full p-2 border rounded bg-gray-50">
                            <option value="todos">Todas</option>
                        </select>
                    </div>
                    <div class="flex-1 w-full">
                        <label class="block text-sm font-bold text-gray-700 mb-1">Filtrar por Subcategoria</label>
                        <select id="relatorio-subcategoria" class="w-full p-2 border rounded bg-gray-50" disabled>
                            <option value="todos">Todas</option>
                        </select>
                    </div>

                    <div class="flex-1 w-full">
                        <label class="block text-sm font-bold text-gray-700 mb-1">Filtrar por Vendedor</label>
                        <select id="relatorio-vendedor" class="w-full p-2 border rounded bg-gray-50">
                            <option value="todos">Geral (Todos)</option>
                        </select>
                    </div>
                    <div class="flex-1 w-full">
                        <label class="block text-sm font-bold text-gray-700 mb-1">Filtrar por Tipo</label>
                        <select id="relatorio-tipo-receita" class="w-full p-2 border rounded bg-gray-50">
                            <option value="todos">Todos</option>
                            <option value="pacotes">Apenas Pacotes</option>
                            <option value="extras">Apenas Extras</option>
                        </select>
                    </div>
                    <button onclick="window.app.gerarRelatorio()"
                        class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 w-full md:w-auto h-10 flex items-center justify-center">
                        <i data-lucide="refresh-cw" class="w-4 h-4 mr-2"></i> Atualizar
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded shadow-sm">
                        <p class="text-sm text-green-700 font-bold">Total Receitas</p>
                        <p class="text-2xl font-bold text-gray-800" id="relatorio-total-receitas">R$ 0,00</p>
                    </div>
                    <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded shadow-sm">
                        <p class="text-sm text-red-700 font-bold">Total Despesas</p>
                        <p class="text-2xl font-bold text-gray-800" id="relatorio-total-despesas">R$ 0,00</p>
                    </div>
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded shadow-sm">
                        <p class="text-sm text-blue-700 font-bold">Saldo do Período</p>
                        <p class="text-2xl font-bold text-gray-800" id="relatorio-saldo">R$ 0,00</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white rounded-lg shadow-md border-t-4 border-green-500">
                        <div class="p-4 border-b bg-gray-50 flex justify-between items-center">
                            <h3 class="font-bold text-gray-700 flex items-center"><i data-lucide="arrow-up-circle"
                                    class="text-green-500 w-5 h-5 mr-2"></i> Entradas (Recebido)</h3>
                        </div>
                        <div class="overflow-x-auto max-h-[500px] overflow-y-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-100 text-gray-600 sticky top-0">
                                    <tr>
                                        <th class="p-3 text-left">Dia</th>
                                        <th class="p-3 text-left">Descrição/Cliente</th>
                                        <th class="p-3 text-right">Valor</th>
                                    </tr>
                                </thead>
                                <tbody id="relatorio-lista-entradas"></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-md border-t-4 border-red-500">
                        <div class="p-4 border-b bg-gray-50 flex justify-between items-center">
                            <h3 class="font-bold text-gray-700 flex items-center"><i data-lucide="arrow-down-circle"
                                    class="text-red-500 w-5 h-5 mr-2"></i> Saídas (Custos)</h3>
                        </div>
                        <div class="overflow-x-auto max-h-[500px] overflow-y-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-100 text-gray-600 sticky top-0">
                                    <tr>
                                        <th class="p-3 text-left">Dia</th>
                                        <th class="p-3 text-left">Descrição</th>
                                        <th class="p-3 text-right">Valor</th>
                                    </tr>
                                </thead>
                                <tbody id="relatorio-lista-saidas"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div id="section-calendario" class="content-section hidden">
                <h1 class="text-2xl font-bold mb-6 text-gray-800">Calendário</h1>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <div class="flex justify-between items-center mb-6">
                        <button id="calendario-prev" class="p-2 hover:bg-gray-100 rounded"><i
                                data-lucide="chevron-left"></i></button>
                        <h2 id="calendario-mes-ano" class="text-xl font-bold capitalize">Mês Ano</h2>
                        <button id="calendario-next" class="p-2 hover:bg-gray-100 rounded"><i
                                data-lucide="chevron-right"></i></button>
                    </div>
                    <div class="grid grid-cols-7 gap-1 text-center font-bold text-gray-500 mb-2">
                        <div>Dom</div>
                        <div>Seg</div>
                        <div>Ter</div>
                        <div>Qua</div>
                        <div>Qui</div>
                        <div>Sex</div>
                        <div>Sáb</div>
                    </div>
                    <div id="calendario-grid" class="grid grid-cols-7 gap-1 bg-gray-200 border border-gray-200"></div>
                </div>
            </div>
            <div id="section-configuracoes" class="content-section hidden">
                <h1 class="text-2xl font-bold mb-6 text-gray-800 border-b pb-4">Configurações do Sistema</h1>

                <div class="space-y-8">

                    <!-- 1. Estrutura de Eventos -->
                    <div>
                        <h2 class="text-lg font-semibold text-gray-700 mb-4 flex items-center"><i data-lucide="layers"
                                class="w-5 h-5 mr-2"></i> Estrutura de Eventos</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <!-- Categorias -->
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <h3 class="font-bold text-gray-600">Categorias</h3>
                                    <button onclick="window.app.clearCategoriaForm()"
                                        class="text-xs text-blue-600 hover:underline">+ Nova</button>
                                </div>
                                <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-orange-500 mb-3">
                                    <form id="form-categoria" class="space-y-2">
                                        <input type="hidden" id="categoria-id">
                                        <input type="text" id="categoria-nome" class="w-full p-2 border rounded text-sm"
                                            placeholder="Nome (Ex: Casamento)" required>
                                        <button type="submit"
                                            class="w-full bg-orange-600 text-white py-1.5 rounded text-sm hover:bg-orange-700">Salvar</button>
                                    </form>
                                </div>
                                <div id="lista-categorias" class="space-y-2 max-h-60 overflow-y-auto pr-1"></div>
                            </div>

                            <!-- Subcategorias -->
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <h3 class="font-bold text-gray-600">Subcategorias</h3>
                                    <button onclick="window.app.clearSubcategoriaForm()"
                                        class="text-xs text-blue-600 hover:underline">+ Nova</button>
                                </div>
                                <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-yellow-500 mb-3">
                                    <form id="form-subcategoria" class="space-y-2">
                                        <input type="hidden" id="subcategoria-id">
                                        <select id="subcategoria-categoria-pai"
                                            class="w-full p-2 border rounded text-sm" required>
                                            <option value="">Categoria Mestre...</option>
                                        </select>
                                        <input type="text" id="subcategoria-nome"
                                            class="w-full p-2 border rounded text-sm"
                                            placeholder="Nome (Ex: Mini Wedding)" required>
                                        <button type="submit"
                                            class="w-full bg-yellow-600 text-white py-1.5 rounded text-sm hover:bg-yellow-700">Salvar</button>
                                    </form>
                                </div>
                                <div id="lista-subcategorias" class="space-y-2 max-h-60 overflow-y-auto pr-1"></div>
                            </div>

                            <!-- Pacotes -->
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <h3 class="font-bold text-gray-600">Pacotes</h3>
                                    <button onclick="window.app.clearPacoteForm()"
                                        class="text-xs text-blue-600 hover:underline">+ Novo</button>
                                </div>
                                <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-blue-500 mb-3">
                                    <form id="form-pacote" class="space-y-2">
                                        <input type="hidden" id="pacote-id">
                                        <select id="pacote-tipo-vinculo" class="w-full p-2 border rounded text-sm"
                                            required>
                                            <option value="">Categoria...</option>
                                        </select>
                                        <input type="text" id="pacote-nome" class="w-full p-2 border rounded text-sm"
                                            placeholder="Nome (Ex: Ouro)" required>
                                        <input type="number" id="pacote-valor" class="w-full p-2 border rounded text-sm"
                                            placeholder="Valor (R$)" step="0.01" required>
                                        <button type="submit"
                                            class="w-full bg-blue-600 text-white py-1.5 rounded text-sm hover:bg-blue-700">Salvar</button>
                                    </form>
                                </div>
                                <div id="lista-pacotes" class="space-y-2 max-h-60 overflow-y-auto pr-1"></div>
                            </div>
                        </div>
                    </div>

                    <hr class="border-gray-200">

                    <!-- 2. Equipe -->
                    <div>
                        <h2 class="text-lg font-semibold text-gray-700 mb-4 flex items-center"><i data-lucide="users"
                                class="w-5 h-5 mr-2"></i> Equipe</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Vendedores -->
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <h3 class="font-bold text-gray-600">Vendedores</h3>
                                    <button onclick="window.app.clearVendedorForm()"
                                        class="text-xs text-blue-600 hover:underline">+ Novo</button>
                                </div>
                                <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-teal-500 mb-3">
                                    <form id="form-vendedor" class="space-y-2">
                                        <input type="hidden" id="vendedor-id">
                                        <input type="text" id="vendedor-nome" class="w-full p-2 border rounded text-sm"
                                            placeholder="Nome Completo" required>
                                        <button type="submit"
                                            class="w-full bg-teal-600 text-white py-1.5 rounded text-sm hover:bg-teal-700">Salvar</button>
                                    </form>
                                </div>
                                <div id="lista-vendedores" class="space-y-2 max-h-60 overflow-y-auto pr-1"></div>
                            </div>

                            <!-- Fotógrafos -->
                            <div>
                                <h3 class="font-bold text-gray-600 mb-2">Fotógrafos Parceiros</h3>
                                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-3">
                                    <form id="form-fotografo" class="flex gap-2">
                                        <input type="text" name="fotografo-nome" placeholder="Nome"
                                            class="p-2 border rounded flex-1 text-sm" required>
                                        <input type="text" name="fotografo-contato" placeholder="Contato/Pix"
                                            class="p-2 border rounded flex-1 text-sm">
                                        <button type="submit"
                                            class="bg-gray-800 text-white px-4 rounded text-sm">+</button>
                                    </form>
                                </div>
                                <div class="bg-white rounded border border-gray-200 max-h-60 overflow-y-auto">
                                    <table class="w-full text-sm">
                                        <tbody id="lista-fotografos"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr class="border-gray-200">

                    <!-- 3. Documentos (Templates) -->
                    <div>
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-semibold text-gray-700 flex items-center"><i data-lucide="file-text"
                                    class="w-5 h-5 mr-2"></i> Templates de Contrato & Orçamento</h2>
                            <button onclick="window.app.clearTemplateForm()"
                                class="text-sm text-blue-600 hover:underline">+ Novo Template</button>
                        </div>
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <!-- Editor -->
                            <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-sm border-l-4 border-purple-500">
                                <form id="form-template" class="space-y-4">
                                    <input type="hidden" id="template-id">
                                    <input type="text" id="template-titulo"
                                        placeholder="Título do Template (Ex: Contrato Padrão)"
                                        class="w-full p-2 border rounded font-bold text-gray-800" required>

                                    <div class="grid grid-cols-2 gap-4 bg-purple-50 p-3 rounded">
                                        <div>
                                            <label class="block text-xs font-bold text-gray-600 mb-1">Vincular a
                                                Tipo</label>
                                            <select id="template-link-tipo"
                                                class="w-full p-2 border rounded text-sm bg-white">
                                                <option value="geral">Geral (Todos)</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-xs font-bold text-gray-600 mb-1">Vincular a
                                                Pacote</label>
                                            <select id="template-link-pacote"
                                                class="w-full p-2 border rounded text-sm bg-white">
                                                <option value="">Qualquer Pacote</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="border rounded p-2 bg-gray-50 text-xs text-gray-500">
                                        <p class="font-bold mb-1">Variáveis disponíveis:</p>
                                        <div class="flex flex-wrap gap-2">
                                            <span
                                                class="bg-white border px-2 py-1 rounded cursor-pointer hover:bg-gray-100"
                                                onclick="document.execCommand('insertText', false, '{CLIENTE_NOME}')">{CLIENTE_NOME}</span>
                                            <span
                                                class="bg-white border px-2 py-1 rounded cursor-pointer hover:bg-gray-100"
                                                onclick="document.execCommand('insertText', false, '{VALOR_TOTAL}')">{VALOR_TOTAL}</span>
                                        </div>
                                    </div>

                                    <div class="editor-container border rounded">
                                        <div class="editor-toolbar bg-gray-100 p-2 border-b flex gap-1">
                                            <button type="button" onclick="document.execCommand('bold',false,null)"
                                                class="p-1 hover:bg-gray-200 rounded w-8 font-bold">B</button>
                                            <button type="button" onclick="document.execCommand('italic',false,null)"
                                                class="p-1 hover:bg-gray-200 rounded w-8 italic">I</button>
                                            <button type="button" onclick="document.execCommand('underline',false,null)"
                                                class="p-1 hover:bg-gray-200 rounded w-8 underline">U</button>
                                        </div>
                                        <div id="template-corpo"
                                            class="rich-editor p-4 h-64 overflow-y-auto outline-none"
                                            contenteditable="true"></div>
                                    </div>

                                    <button type="submit"
                                        class="w-full bg-purple-600 text-white py-2 rounded shimmer hover:bg-purple-700">Salvar
                                        Template</button>
                                </form>
                            </div>

                            <!-- Lista Templates -->
                            <div class="bg-gray-50 p-4 rounded-lg border h-fit">
                                <h3 class="font-bold text-gray-600 mb-3 border-b pb-2">Templates Salvos</h3>
                                <div id="lista-templates" class="space-y-2 max-h-[500px] overflow-y-auto"></div>
                            </div>
                        </div>
                    </div>

                    <!-- 4. Utilitários -->
                    <div class="border-t pt-6">
                        <h2 class="text-lg font-semibold text-gray-700 mb-4">Utilitários</h2>
                        <button onclick="window.app.exportarCSV()"
                            class="bg-green-600 text-white px-6 py-3 rounded-lg shadow hover:bg-green-700 flex items-center">
                            <i data-lucide="download" class="w-5 h-5 mr-3"></i> Exportar Banco de Dados Completo
                            (CSV/Excel)
                        </button>
                    </div>

                </div>
            </div>
        </main>
    </div>


    <div id="modal-add-payment"
        class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-md">
            <h2 class="text-xl font-bold mb-4">Adicionar Pagamento</h2>
            <div id="payment-context-info" class="mb-4 bg-blue-50 text-blue-800 p-3 rounded text-sm hidden">
                <p class="font-bold">Referente a:</p>
                <p id="payment-context-detail">---</p>
            </div>
            <form id="add-payment-form">
                <input type="hidden" id="payment-contrato-id">
                <div class="mb-4"><label class="block text-sm font-medium text-gray-700">Valor (R$)</label><input
                        type="number" id="payment-amount" step="0.01" class="w-full p-2 border rounded" required></div>
                <div class="mb-4"><label class="block text-sm font-medium text-gray-700">Data</label><input type="date"
                        id="payment-date" class="w-full p-2 border rounded" required></div>
                <div class="mb-4"><label class="block text-sm font-medium text-gray-700">Método</label>
                    <select id="payment-method" class="w-full p-2 border rounded">
                        <option value="Pix">Pix</option>
                        <option value="Dinheiro">Dinheiro</option>
                        <option value="Cartão">Cartão</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700">Tipo (Opcional - Ex: Venda de
                        Equipamento)</label>
                    <input type="text" id="payment-tipo" class="w-full p-2 border rounded"
                        placeholder="Descrição da entrada (se avulsa)">
                </div>
                <div class="mb-4 flex items-center bg-blue-50 p-2 rounded border border-blue-100">
                    <input type="checkbox" id="payment-is-extra" class="w-4 h-4 text-blue-600 rounded mr-2">
                    <label for="payment-is-extra" class="text-sm font-medium text-gray-700">Refere-se a venda de Foto
                        Extra?</label>
                </div>
                <div class="flex justify-end gap-2"><button type="button" id="cancel-payment-button"
                        class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded">Cancelar</button><button type="submit"
                        class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">Salvar</button></div>
            </form>
        </div>
    </div>

    <div id="modal-dossie"
        class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]">
            <div class="bg-gray-800 text-white p-4 flex justify-between items-center">
                <h2 class="text-xl font-bold flex items-center"><i data-lucide="folder-open" class="mr-2"></i> Dossiê do
                    Contrato</h2><button onclick="window.app.closeDossieModal()"
                    class="text-gray-300 hover:text-white"><i data-lucide="x"></i></button>
            </div>
            <div class="p-6 overflow-y-auto">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-gray-50 p-4 rounded border">
                        <p class="text-xs text-gray-500 uppercase font-bold">Cliente</p>
                        <p class="text-lg font-medium text-gray-800" id="dossie-cliente-nome">---</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded border">
                        <p class="text-xs text-gray-500 uppercase font-bold">Evento</p>
                        <p class="text-lg font-medium text-gray-800"><span id="dossie-evento-nome">---</span> <span
                                class="text-sm text-gray-500 block" id="dossie-evento-data">---</span></p>
                    </div>
                </div>
                <h3 class="font-bold text-gray-800 border-b pb-2 mb-4">Resumo Financeiro</h3>
                <div class="grid grid-cols-3 gap-4 mb-6 text-center">
                    <div>
                        <p class="text-xs text-gray-500">Total Contratado</p>
                        <p class="text-xl font-bold text-blue-600" id="dossie-contrato-valor">R$ 0,00</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500">Total Pago</p>
                        <p class="text-xl font-bold text-green-600" id="dossie-total-pago">R$ 0,00</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500">Restante</p>
                        <p class="text-xl font-bold text-red-600" id="dossie-restante">R$ 0,00</p>
                    </div>
                </div>
                <h3 class="font-bold text-gray-800 border-b pb-2 mb-4">Histórico de Pagamentos</h3>
                <div id="dossie-lista-pagamentos" class="space-y-2 text-sm text-gray-600 mb-6"></div>
                <div class="flex items-center justify-between bg-yellow-50 p-3 rounded border border-yellow-200"><span
                        class="text-yellow-800 font-medium">Status Atual: <span
                            id="dossie-contrato-status">---</span></span></div>

                <h3 class="font-bold text-gray-800 border-b pb-2 mb-4 mt-6">Custos do Evento</h3>
                <div id="dossie-lista-custos" class="space-y-2 text-sm text-gray-600 mb-6"></div>

                <div class="border-t pt-4 flex justify-between items-center">
                    <span class="font-bold text-gray-700">Lucro Líquido do Evento:</span>
                    <span id="dossie-lucro-liquido" class="font-bold text-xl">R$ 0,00</span>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-edit-contrato"
        class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto">
            <h2 class="text-xl font-bold mb-4">Editar Contrato & Valores</h2>
            <form id="edit-contract-form">
                <input type="hidden" id="edit-contrato-id">
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-bold text-gray-700">Valor Pacote (R$)</label>
                        <input type="number" id="edit-contrato-valor" step="0.01"
                            class="w-full p-2 border border-blue-300 rounded bg-blue-50 font-bold text-gray-800"
                            required>
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700">Extra Foto (R$)</label>
                        <input type="number" id="edit-contrato-valor-extra" step="0.01"
                            class="w-full p-2 border border-blue-300 rounded bg-blue-50 font-bold text-gray-800">
                    </div>
                </div>
                <div class="mb-4"><label class="block text-sm font-bold text-gray-700 mb-1">Histórico / Motivo das
                        Alterações</label><textarea id="edit-contrato-historico" rows="4"
                        class="w-full p-2 border rounded text-sm bg-gray-50"
                        placeholder="Ex: Valor original R$ 2.000..."></textarea></div>
                <div class="mb-4"><label class="block text-sm font-medium text-gray-700">Status</label><select
                        id="edit-contrato-status" class="w-full p-2 border rounded">
                        <option value="Proposta">Proposta</option>
                        <option value="Enviado">Enviado</option>
                        <option value="Assinado">Assinado</option>
                        <option value="Concluído">Concluído</option>
                        <option value="Cancelado">Cancelado</option>
                    </select></div>
                <div class="mb-4"><label class="block text-sm font-medium text-gray-700">Link do Contrato
                        (Drive)</label><input type="text" id="edit-contrato-link" class="w-full p-2 border rounded">
                </div>
                <div class="mb-4"><label class="block text-sm font-medium text-gray-700">Forma Pagamento</label><input
                        type="text" id="edit-contrato-forma-pagamento" class="w-full p-2 border rounded"></div>
                <div class="flex justify-end gap-2"><button type="button" id="cancel-edit-contract-button"
                        class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded">Cancelar</button><button type="submit"
                        class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Salvar Alterações</button>
                </div>
            </form>
        </div>
    </div>

    <div id="modal-edit-cliente"
        class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-md">
            <h2 class="text-xl font-bold mb-4">Editar Cliente</h2>
            <form id="form-edit-cliente">
                <input type="hidden" id="edit-cliente-id">
                <div class="mb-4"><label class="block text-sm font-medium text-gray-700">Nome</label><input type="text"
                        id="edit-cliente-nome" class="w-full p-2 border rounded" required></div>
                <div class="mb-4"><label class="block text-sm font-medium text-gray-700">Telefone</label><input
                        type="text" id="edit-cliente-telefone" class="w-full p-2 border rounded"></div>
                <div class="mb-4"><label class="block text-sm font-medium text-gray-700">Email</label><input
                        type="email" id="edit-cliente-email" class="w-full p-2 border rounded"></div>
                <div class="mb-4"><label class="block text-sm font-medium text-gray-700">CPF/RG</label><input
                        type="text" id="edit-cliente-documento" class="w-full p-2 border rounded"></div>
                <div class="mb-4"><label class="block text-sm font-medium text-gray-700">Endereço</label><input
                        type="text" id="edit-cliente-endereco" class="w-full p-2 border rounded"></div>
                <div class="flex justify-end gap-2"><button type="button" onclick="window.app.closeEditClienteModal()"
                        class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded">Cancelar</button><button type="submit"
                        class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Salvar</button></div>
            </form>
        </div>
    </div>
    <script type="module" src="js/main.js"></script>
</body>

</html>